# Vue.js Camera App - Модульная архитектура

## Обзор архитектуры

Приложение Vue.js Camera App было реорганизовано из монолитного компонента в модульную структуру, следуя принципам разделения ответственности и повторного использования кода.

## Уровни абстракции

### 1. Модель данных
- `Photo.js` - класс, представляющий модель фотографии с методами для работы с данными.

### 2. Сервисный слой
- `mockServer.js` - имитация серверного API для хранения фотографий.
- `photoService.js` - сервис для взаимодействия с API (через mockServer).

### 3. Утилиты
- `imageUtils.js` - вспомогательные функции для работы с изображениями.

### 4. Композиционные функции (Composables)
- `useCamera.js` - логика работы с камерой устройства.
- `usePhotoGallery.js` - логика работы с галереей фотографий.

### 5. UI компоненты
- `CameraApp.vue` - главный компонент приложения.
- `CameraView.vue` - компонент для отображения камеры и управления ей.
- `PhotoGallery.vue` - компонент для отображения галереи фотографий.
- `PhotoItem.vue` - компонент для отображения отдельной фотографии в галерее.
- `PhotoModal.vue` - модальное окно для просмотра фотографии в полном размере.

## Описание компонентов

### Модель данных

#### Photo.js
Класс для представления фотографий с методами для:
- Генерации ID
- Создания объекта из серверных данных (`fromServerData`)
- Преобразования в формат для отправки на сервер (`toServerData`)

### Сервисный слой

#### mockServer.js
Имитирует серверное API с методами:
- `getPhotos()` - получение списка фотографий
- `addPhoto(photo)` - добавление новой фотографии
- `deletePhoto(id)` - удаление фотографии по ID

#### photoService.js
Посредник между UI и сервером, инкапсулирует логику работы с API:
- `getPhotos()` - загрузка фотографий с сервера
- `uploadPhoto(photo)` - загрузка фото на сервер
- `deletePhoto(photoId)` - удаление фото с сервера

### Утилиты

#### imageUtils.js
Функции для работы с изображениями:
- `dataURLtoBlob()` - преобразование Data URL в Blob
- `captureVideoFrame()` - создание скриншота с видеоэлемента
- `downloadImage()` - скачивание изображения

### Композиционные функции

#### useCamera.js
Хук для работы с камерой устройства:
- Включение/выключение камеры
- Переключение между фронтальной и основной камерой
- Создание снимков

#### usePhotoGallery.js
Хук для работы с галереей фотографий:
- Загрузка фотографий с сервера
- Добавление/удаление фотографий
- Загрузка фотографий на сервер
- Управление выбранной фотографией

### UI компоненты

#### CameraApp.vue
Главный компонент, объединяющий все части приложения.

#### CameraView.vue
Компонент для отображения камеры и управления ей.

#### PhotoGallery.vue
Компонент для отображения галереи фотографий.

#### PhotoItem.vue
Компонент для отображения отдельной фотографии в галерее с кнопками для действий.

#### PhotoModal.vue
Модальное окно для просмотра фотографии в полном размере.

## Преимущества новой архитектуры

1. **Разделение ответственности** - каждый компонент отвечает только за свою часть функциональности.
2. **Повторное использование** - общая логика вынесена в отдельные функции и классы.
3. **Тестируемость** - изолированные компоненты можно легко тестировать.
4. **Масштабируемость** - новые функции можно добавлять, не изменяя существующий код.
5. **Удобство поддержки** - упрощается поиск ошибок и внесение изменений.

## Поток данных

1. Пользователь взаимодействует с UI компонентами.
2. Компоненты используют композиционные функции для работы с логикой.
3. Композиционные функции обращаются к сервисному слою.
4. Сервисный слой взаимодействует с API (mockServer).
5. Данные возвращаются по тому же пути обратно к UI.

## Дальнейшие улучшения

- Добавление управления состоянием через Pinia/Vuex
- Внедрение TypeScript для типизации
- Написание модульных тестов
- Добавление маршрутизации для многостраничного приложения
- Реализация реального серверного API
